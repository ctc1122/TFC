<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<HBox spacing="20" xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.example.pruebamongodbcss.Modulos.Videollamada.VideollamadaController"
      stylesheets="@./styles.css">
    
    <!-- Panel izquierdo: Lista de usuarios -->
    <VBox spacing="10" styleClass="side-panel" prefWidth="250">
        <padding>
            <Insets top="20" right="20" bottom="20" left="20"/>
        </padding>
        
        <Label text="Usuarios Conectados" styleClass="title-label"/>
        
        <TextField fx:id="buscarTextField" 
                  promptText="Buscar usuarios..."
                  styleClass="search-field"/>
                  
        <ListView fx:id="usuariosListView" 
                  VBox.vgrow="ALWAYS"
                  styleClass="users-list"/>
                  
        <Label fx:id="estadoConexionLabel" 
               styleClass="status-label"
               text="Conectado"/>
               
        <!-- Sección para crear/unirse a sala -->
        <Separator/>
        <Label text="Crear o Unirse a Sala" styleClass="subtitle-label"/>
        
        <TextField fx:id="nombreTextField"
                  promptText="Tu nombre para la videollamada"
                  styleClass="text-field"/>
                  
        <TextField fx:id="salaTextField"
                  promptText="ID de la sala para unirse"
                  styleClass="text-field"/>
                  
        <HBox spacing="10">
            <Button fx:id="crearSalaButton"
                    text="Crear Sala"
                    styleClass="secondary-button"/>
            <Button fx:id="unirseButton"
                    text="Unirse"
                    styleClass="secondary-button"/>
        </HBox>
    </VBox>
    
    <!-- Panel derecho: Información de llamada -->
    <VBox spacing="15" HBox.hgrow="ALWAYS">
        <padding>
            <Insets top="20" right="20" bottom="20" left="20"/>
        </padding>

        <HBox spacing="10" alignment="CENTER_LEFT">
            <Label fx:id="usuarioSeleccionadoLabel" 
                   text="Seleccione un usuario para llamar"
                   styleClass="subtitle-label"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Label fx:id="estadoUsuarioLabel" 
                   text="Estado: -"
                   styleClass="status-label"/>
        </HBox>
        
        <HBox spacing="10" alignment="CENTER">
            <Button fx:id="llamarButton" 
                    text="Llamar"
                    styleClass="primary-button"
                    disable="true"/>
            <Button fx:id="colgarButton" 
                    text="Colgar"
                    styleClass="danger-button"
                    visible="false"/>
        </HBox>
        
        <VBox fx:id="infoSalaBox" 
              spacing="10" 
              styleClass="info-box"
              visible="false">
            <Label text="Información de la Sala" styleClass="subtitle-label"/>
            <TextArea fx:id="infoSalaText" 
                      editable="false"
                      wrapText="true"
                      prefRowCount="3"/>
            <Button fx:id="copiarButton"
                    text="Copiar Información"
                    styleClass="secondary-button"/>
        </VBox>
        
        <VBox fx:id="llamadaEnCursoBox" 
              spacing="10" 
              styleClass="call-box"
              visible="false">
            <Label text="Llamada en curso" styleClass="subtitle-label"/>
            <Label fx:id="tiempoLlamadaLabel" 
                   text="Duración: 00:00"
                   styleClass="time-label"/>
        </VBox>
        
        <Label fx:id="estadoLabel" 
               styleClass="status-label"
               wrapText="true"/>
    </VBox>
</HBox> 