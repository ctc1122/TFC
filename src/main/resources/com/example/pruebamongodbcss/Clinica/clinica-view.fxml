<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import io.github.palexdev.materialfx.controls.MFXDatePicker?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.layout.Region?>

<BorderPane fx:id="mainPane" prefHeight="700.0" prefWidth="1024.0" styleClass="panel-content" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.pruebamongodbcss.Modulos.Clinica.ClinicaController">
   <top>
      <HBox alignment="CENTER_LEFT" prefHeight="60.0" styleClass="panel-header" BorderPane.alignment="CENTER">
         <children>
            <Label text="Gestión de Clínica Veterinaria">
               <font>
                  <Font name="System Bold" size="24.0" />
               </font>
               <HBox.margin>
                  <Insets left="20.0" />
               </HBox.margin>
            </Label>
         </children>
      </HBox>
   </top>
   <center>
      <VBox alignment="CENTER" styleClass="panel-content">
         <VBox.margin>
            <Insets top="32" left="32" right="32" bottom="32"/>
         </VBox.margin>
         <TabPane fx:id="tabPane" BorderPane.alignment="CENTER">
            <tabs>
               <Tab fx:id="tabPacientes" closable="false" text="Pacientes">
                  <content>
                     <VBox spacing="10.0" styleClass="panel-content">
                        <children>
                           <HBox alignment="CENTER_LEFT" spacing="10.0">
                              <children>
                                 <TextField fx:id="txtBuscarPaciente" promptText="Buscar paciente..." HBox.hgrow="ALWAYS">
                                    <padding>
                                       <Insets bottom="8.0" left="8.0" right="8.0" top="8.0" />
                                    </padding>
                                 </TextField>
                                 <Button fx:id="btnNuevoPaciente" onAction="#onNuevoPaciente" styleClass="btn-primary" text="Nuevo Paciente" />
                                 <Button fx:id="btnEditarPaciente" onAction="#onEditarPaciente" styleClass="btn-secondary" text="Editar" />
                                 <Button fx:id="btnEliminarPaciente" onAction="#onEliminarPaciente" styleClass="btn-danger" text="Eliminar" />
                                 <Button fx:id="btnVerHistorial" onAction="#onVerHistorial" styleClass="btn-info" text="Ver Historial" />
                              </children>
                              <VBox.margin>
                                 <Insets left="10.0" right="10.0" top="10.0" />
                              </VBox.margin>
                           </HBox>
                           <StackPane VBox.vgrow="ALWAYS">
                              <children>
                                 <ScrollPane fitToHeight="true" fitToWidth="true">
                                    <content>
                                       <TableView fx:id="tablaPacientes" prefHeight="400.0">
                                          <columns>
                                             <TableColumn fx:id="colNombrePaciente" prefWidth="200.0" text="Nombre" />
                                             <TableColumn fx:id="colEspecie" prefWidth="150.0" text="Especie" />
                                             <TableColumn fx:id="colRaza" prefWidth="150.0" text="Raza" />
                                             <TableColumn fx:id="colPropietario" prefWidth="250.0" text="Propietario" />
                                          </columns>
                                       </TableView>
                                    </content>
                                 </ScrollPane>
                              </children>
                              <VBox.margin>
                                 <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                              </VBox.margin>
                           </StackPane>
                        </children>
                     </VBox>
                  </content>
               </Tab>
               <Tab fx:id="tabPropietarios" closable="false" text="Propietarios">
                  <content>
                     <VBox spacing="10.0">
                        <children>
                           <HBox alignment="CENTER_LEFT" spacing="10.0">
                              <children>
                                 <TextField fx:id="txtBuscarPropietario" promptText="Buscar propietario..." style="-fx-background-color: #f5f5f5;" HBox.hgrow="ALWAYS">
                                    <padding>
                                       <Insets bottom="8.0" left="8.0" right="8.0" top="8.0" />
                                    </padding>
                                 </TextField>
                                 <Button fx:id="btnNuevoPropietario" onAction="#onNuevoPropietario" styleClass="btn-primary" text="Nuevo Propietario" />
                                 <Button fx:id="btnEditarPropietario" onAction="#onEditarPropietario" styleClass="btn-secondary" text="Editar" />
                                 <Button fx:id="btnEliminarPropietario" onAction="#onEliminarPropietario" styleClass="btn-danger" text="Eliminar" />
                                 <Button fx:id="btnVerMascotas" onAction="#onVerMascotas" styleClass="btn-info" text="Ver Mascotas" />
                              </children>
                              <VBox.margin>
                                 <Insets left="10.0" right="10.0" top="10.0" />
                              </VBox.margin>
                           </HBox>
                           <StackPane VBox.vgrow="ALWAYS">
                              <children>
                                 <ScrollPane fitToHeight="true" fitToWidth="true">
                                    <content>
                                       <TableView fx:id="tablaPropietarios" prefHeight="400.0" style="-fx-background-color: white;">
                                          <columns>
                                             <TableColumn fx:id="colNombrePropietario" prefWidth="250.0" text="Nombre" />
                                             <TableColumn fx:id="colDNI" prefWidth="120.0" text="DNI" />
                                             <TableColumn fx:id="colTelefono" prefWidth="150.0" text="Teléfono" />
                                             <TableColumn fx:id="colEmail" prefWidth="200.0" text="Email" />
                                          </columns>
                                       </TableView>
                                    </content>
                                 </ScrollPane>
                              </children>
                              <VBox.margin>
                                 <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                              </VBox.margin>
                           </StackPane>
                        </children>
                     </VBox>
                  </content>
               </Tab>
               <Tab fx:id="tabDiagnosticos" closable="false" text="Diagnósticos">
                  <content>
                     <VBox spacing="10.0">
                        <children>
                           <HBox alignment="CENTER_LEFT" spacing="10.0">
                              <children>
                                 <Label text="Desde:">
                                    <HBox.margin>
                                       <Insets right="5.0" />
                                    </HBox.margin>
                                 </Label>
                                 <MFXDatePicker fx:id="dpFechaInicio" promptText="Fecha inicio">
                                    <HBox.margin>
                                       <Insets right="10.0" />
                                    </HBox.margin>
                                 </MFXDatePicker>
                                 <Label text="Hasta:">
                                    <HBox.margin>
                                       <Insets right="5.0" />
                                    </HBox.margin>
                                 </Label>
                                 <MFXDatePicker fx:id="dpFechaFin" promptText="Fecha fin">
                                    <HBox.margin>
                                       <Insets right="10.0" />
                                    </HBox.margin>
                                 </MFXDatePicker>
                                 <Label text="Paciente:">
                                    <HBox.margin>
                                       <Insets right="5.0" />
                                    </HBox.margin>
                                 </Label>
                                 <ComboBox fx:id="cmbPacientesDiagnostico" prefWidth="200.0" promptText="Seleccionar paciente">
                                    <HBox.margin>
                                       <Insets right="10.0" />
                                    </HBox.margin>
                                 </ComboBox>
                                 <TextField fx:id="txtBuscarDiagnostico" promptText="Buscar diagnóstico..." style="-fx-background-color: #f5f5f5;" >
                                    <padding>
                                       <Insets bottom="8.0" left="8.0" right="8.0" top="8.0" />
                                    </padding>
                                 </TextField>
                                 <Button fx:id="btnBuscarDiagnostico" onAction="#buscarDiagnosticos" styleClass="btn-secondary" text="Buscar" />
                              </children>
                              <VBox.margin>
                                 <Insets left="10.0" right="10.0" top="10.0" />
                              </VBox.margin>
                           </HBox>
                           <HBox alignment="CENTER_LEFT" spacing="10.0">
                              <children>
                                 <Button fx:id="btnNuevoDiagnostico" onAction="#onNuevoDiagnostico" styleClass="btn-primary" text="Nuevo Diagnóstico" />
                                 <Button fx:id="btnVerDiagnostico" onAction="#onVerDiagnostico" styleClass="btn-info" text="Ver Detalles" />
                                 <Button fx:id="btnEliminarDiagnostico" onAction="#onEliminarDiagnostico" styleClass="btn-danger" text="Eliminar" />
                                 <Button fx:id="btnLimpiarFiltro" onAction="#onLimpiarFiltroDiagnostico" styleClass="btn-secondary" text="Mostrar Todos" />
                                 <Region HBox.hgrow="ALWAYS" />
                                 <Button fx:id="btnExportarPDF" onAction="#onExportarPDFDiagnostico" styleClass="btn-success" text="Exportar a PDF" />
                                 <Button fx:id="btnExportarCSV" onAction="#onExportarCSVDiagnostico" styleClass="btn-info" text="Exportar a CSV" />
                              </children>
                              <VBox.margin>
                                 <Insets left="10.0" right="10.0" />
                              </VBox.margin>
                           </HBox>
                           <StackPane VBox.vgrow="ALWAYS">
                              <children>
                                 <ScrollPane fitToHeight="true" fitToWidth="true">
                                    <content>
                                       <TableView fx:id="tablaDiagnosticos" prefHeight="400.0" style="-fx-background-color: white;">
                                          <columns>
                                             <TableColumn fx:id="colFechaDiagnostico" prefWidth="120.0" text="Fecha" />
                                             <TableColumn fx:id="colPacienteDiagnostico" prefWidth="200.0" text="Paciente" />
                                             <TableColumn fx:id="colMotivo" prefWidth="200.0" text="Motivo" />
                                             <TableColumn fx:id="colDiagnostico" prefWidth="200.0" text="Diagnóstico" />
                                             <TableColumn fx:id="colVeterinario" prefWidth="150.0" text="Veterinario" />
                                          </columns>
                                       </TableView>
                                    </content>
                                 </ScrollPane>
                              </children>
                              <VBox.margin>
                                 <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                              </VBox.margin>
                           </StackPane>
                        </children>
                     </VBox>
                  </content>
               </Tab>
               <Tab fx:id="tabCitas" closable="false" text="Citas">
                  <content>
                     <StackPane>
                        <children>
                           <BorderPane fx:id="citasContainer">
                              
                           </BorderPane>
                        </children>
                     </StackPane>
                  </content>
               </Tab>
            </tabs>
         </TabPane>
      </VBox>
   </center>
</BorderPane> 